<wxs module="m">
    var splitFee = function (fee) {
      if (typeof fee === 'string') {
        fee = fee.split('.')
      } else {
        fee = ['00', '00']
      }
      return {
        feeBig: fee[0],
        feeSmall: fee[1]
      }
    }
    module.exports.splitFee = splitFee;
  </wxs>
<view class="container">
  <view class="block">
    <view class="block-title">
      ä½¿ç”¨é‡è®¾ç½®
      <view class="block-subtitle">æ‚¨ä¸€èˆ¬æ¯ä¸ªæœˆä½¿ç”¨å¤šå°‘é€šè¯å’Œæµé‡ï¼Ÿ</view>
    </view>
    <view class="block-content">
      <view class="block-item column">
        <view class="item-row slider-box">
          <view class="item-title"><image class="item-title-icon" src="/static/images/phone.svg" />æ¯æœˆå¹³å‡é€šè¯æ—¶é—´</view>
          <view class="input-unit">åˆ†é’Ÿ</view>
        </view>
        <view class="item-row">
          <slider class="slider" bindchanging="callSliderChaning" bindchange="callSliderChange" value="{{callSlider}}" max="11" step="1"/>
          <view class="input-value">
            <input type="digit" value="{{callSlider === 11 ? call + ' +': call}}" bindblur="callInputChange"/>
          </view>
        </view>
      </view>
      <view class="block-item column">
        <view class="item-row slider-box">
          <view class="item-title"><image class="item-title-icon" src="/static/images/traffic.svg" />æ¯æœˆå¹³å‡æµé‡ä½¿ç”¨</view>
          <view class="input-unit">GB</view>
        </view>
        <view class="item-row">
          <slider class="slider" bindchanging="trafficSliderChanging" bindchange="trafficSliderChange" value="{{trafficSlider}}" max="15" step="1"/>
          <view class="input-value">
            <input type="digit" value="{{trafficSlider === 15 ? traffic + ' +': traffic}}" bindblur="trafficInputChange"/>
          </view>
        </view>
      </view>
      <view class="block-item column">
        <view class="item-row slider-box">
          <view class="item-title"><image class="item-title-icon" src="/static/images/briefcase.svg" />æ¯æœˆåœ¨çœå¤–çš„æ—¶é—´</view>
          <view class="input-unit">å¤©</view>
        </view>
        <view class="item-row">
          <slider class="slider" bindchanging="outProvinceDaySliderChanging" bindchange="outProvinceDaySliderChange" max="30" step="1"/>
          <view class="input-value">
            <input type="digit" value="{{outProvinceDay}}" bindblur="outProvinceDayInputChange"/>
          </view>
        </view>
      </view>
    </view>
  </view>
  <view class="block plan">
    <view class="block-title">
      æ¨èå¥—é¤
      <view class="block-subtitle">ä»¥ä¸‹æ˜¯æˆ‘æ ¹æ®æ‚¨é€‰æ‹©çš„ä½¿ç”¨é‡ä¸ºæ‚¨æ¨èçš„å¥—é¤</view>
    </view>
    <view class="operator">
      <view class="operator-item" bindtap="onOperatorChange" wx:for="{{operators}}" wx:key="{{item.name}}" data-index="{{index}}" data-checked="{{item.checked}}">
        <view class="operator-name">
          <image class="operator-icon operator-icon-inline" src="{{item.img}}"></image><text class="operator-text">{{item.name}}</text>
        </view>
        <image wx:if="{{item.checked}}" class="operator-icon operator-icon-big" src="/static/images/circle-checked.svg"></image>
        <image wx:else class="operator-icon operator-icon-big" src="/static/images/circle.svg"></image>
      </view>
    </view>
    <view class="block-item" wx:for="{{recommendedGreatPlans}}" data-index="{{index}}" data-type="great" bindtap="goDetail">
      <view class="item-column">
        <view class="plan-name">
          <image wx:if="{{index === 0}}" class="plan-rank-icon" src="/static/images/gold-medal.svg"></image>
          <text>{{item.cardName}}</text>
        </view>
        <view class="plan-partner-name">{{item.partner}}</view>
      </view>
      <view class="plan-fee">
        <view wx:if="{{item.price.condition}}" class="condition">{{item.price.condition}}</view>
        <view class="normal-fee">çº¦<text class="fee-value{{index === 0 ? ' recommanded' : ''}}">
          <text class="fee-value-big">{{m.splitFee(item.price.costEstimate.totalFee).feeBig}}</text>.{{m.splitFee(item.price.costEstimate.totalFee).feeSmall}}</text>å…ƒï¼æœˆ
        </view>
        <view wx:if="{{item.description && item.description !== 'æ— '}}" class="discounted-fee">{{item.description}}</view>
      </view>
    </view>
    <sponsor show="{{showAd}}" ad="{{ad}}"></sponsor>
    <view class="block-item" wx:for="{{recommendedGoodPlans}}" data-index="{{index}}" data-type="good" bindtap="goDetail">
      <view class="item-column">
        <view class="plan-name">
          <image wx:if="{{index === 0}}" class="plan-rank-icon" src="/static/images/silver-medal.svg"></image>
          <image wx:if="{{index === 1}}" class="plan-rank-icon" src="/static/images/copper-medal.svg"></image>
          <text>{{item.cardName}}</text>
        </view>
        <view class="plan-partner-name">{{item.partner}}</view>
      </view>
      <view class="plan-fee">
        <view wx:if="{{item.price.condition}}" class="condition">{{item.price.condition}}</view>
        <view class="normal-fee">çº¦<text class="fee-value{{index === 0 ? ' recommanded' : ''}}">
          <text class="fee-value-big">{{m.splitFee(item.price.costEstimate.totalFee).feeBig}}</text>.{{m.splitFee(item.price.costEstimate.totalFee).feeSmall}}</text>å…ƒï¼æœˆ
        </view>
        <view wx:if="{{item.description && item.description !== 'æ— '}}" class="discounted-fee">{{item.description}}</view>
      </view>
    </view>
    <view class="block-item share">
      <view class="item-column">
        <view class="item-row">
          <view class="sponsor-title">å°†å¥—é¤åŠ©æ‰‹åˆ†äº«ç»™å®¶äººå’Œæœ‹å‹</view>
        </view>
        <view class="item-row">
          <view class="sponsor-subtitle">å¥½ä¸œè¥¿å½“ç„¶è¦åˆ†äº«ç»™å¤§å®¶ï¼</view>
        </view>
        <view class="item-row">
          <view class="btn-group">
            <button class="btn share-btn" open-type="share" type="primary" bindtap="goApplyNew">è½¬å‘åˆ†äº«</button>
            <button class="btn share-btn" type="default" bindtap="getShareImage">ğŸ‘¯ æœ‹å‹åœˆåˆ†äº«</button>
          </view>
        </view>
      </view>
    </view>
    <view class="block-item" wx:for="{{recommendedOtherPlans}}" wx:key="{{item.cardName}}" data-index="{{index}}" data-type="other" bindtap="goDetail">
      <view class="item-column">
        <view class="plan-name">
          <text>{{item.cardName}}</text>
        </view>
        <view class="plan-partner-name">{{item.partner}}</view>
      </view>
      <view class="plan-fee">
        <view wx:if="{{item.price.condition}}" class="condition">{{item.price.condition}}</view>
        <view class="normal-fee">çº¦<text class="fee-value{{index === 0 ? ' recommanded' : ''}}">
          <text class="fee-value-big">{{m.splitFee(item.price.costEstimate.totalFee).feeBig}}</text>.{{m.splitFee(item.price.costEstimate.totalFee).feeSmall}}</text>å…ƒï¼æœˆ
        </view>
        <view wx:if="{{item.description && item.description !== 'æ— '}}" class="discounted-fee">{{item.description}}</view>
      </view>
    </view>
    <sponsor show="{{showAd}}" ad="{{ad}}"></sponsor>
  </view>
  <view class="block footer">
    <view class="footer-image" bindtap="goPrototype">
      <image mode="aspectFit" src="https://prototype.im/badge@2x.png"></image>
    </view>
    <view class="footer-text" bindtap="goFeedback">åé¦ˆé—®é¢˜</view>
  </view>
</view>
